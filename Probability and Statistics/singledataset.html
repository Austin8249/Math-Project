<!DOCTYPE HTML>
<html>

<head>
    <title>&lt;Math&gt; Single Data Set</title>
    <link rel="stylesheet" href="../bootstrap/css/bootstrap.css">
    <!--Bootstrap css-->
    <link rel="stylesheet" href="style.css">
    <!--Local Style sheet-->
    <script src="../jquery.min.js"></script>
    <!--Jquery-->
    <script src="../bootstrap/js/bootstrap.min.js"></script>
    <!--Bootstrap js-->
    <meta charset="ISO-8859-1">
    <!--unicode-->
    <script src="../mspace.js"></script>
    <!--MathML-->
    <link href="../googlefonts.css" rel="stylesheet">
    <!--fonts-->
    <meta charset="UTF-8">
    <!--declare unicode-->
</head>
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="../home.Html">
                <h3 style="margin:5px;">&lt;Math&gt;</h3>
            </a>
        </div>
        <form class="navbar-form navbar-right" action="http://www.example.com/search.php">
            <div class="form-group">
                <input type="text" class="form-control" placeholder="Search">
            </div>
            <button type="submit" class="btn btn-default">Submit</button>
        </form>
        <!--Nav menu-->
        <ul class="nav navbar-nav">
            <li>
                <a href="../algebra.html">
                    <h4>Basic Algebra</h4>
                </a>
            </li>
            <li>
                <a href="../probandstat.html">
                    <h4>Probability and Statistics</h4>
                </a>
            </li>
            <li>
                <a href="../physics.html">
                    <h4>Physics</h4>
                </a>
            </li>
            <li>
                <a href="../precal.html">
                    <h4>Pre-Calculus</h4>
                </a>
            </li>
            <li>
                <a href="../geometry.html">
                    <h4>Geometry</h4>
                </a>
            </li>
            <li>
                <a href="../characters.html">
                    <h4>Math Characters</h4>
                </a>
            </li>
        </ul>
</nav>

<body>
    <h1>Single Data Set Tool</h1>
    <div class="form-group col-sm-4">
        <!--input-->
        <h4> please enter the x values like this "1, 2, 3"</h4>
        <input id="xvalues" type="text" class="form-control"></input>
        <input type="button" class="btn btn-default" name="submit" value="Submit" id="submitxy"></input>
    </div>
    <!--Values for the Array-->
    <div class="col-sm-3 pull-right panel panel-default">
        <h4>
            <math xmlns="http://www.w3.org/1998/Math/MathML">
                <mrow>
                    <mi>Frequency</mi>
                    <mo>=</mo>
                    <mn id="n"></mn>
                </mrow>
                <br>
            </math>
            <math xmlns="http://www.w3.org/1998/Math/MathML">
                <mrow>
                    <mi>Mean</mi>
                    <mo>=</mo>
                    <mn id="xbar"></mn>
                </mrow>
                <br>
            </math>
            <math xmlns="http://www.w3.org/1998/Math/MathML">
                <mrow>
                    <mi>Median</mi>
                    <mo>=</mo>
                    <mn id="median"></mn>
                </mrow>
                <br>
            </math>
            <math xmlns="http://www.w3.org/1998/Math/MathML">
                <mrow>
                    <mi>Mode</mi>
                    <mo>=</mo>
                    <mn id="mode"></mn>
                    <mi>|</mi>
                    <mn id=maxCount></mn>
                </mrow>
                <br>
            </math>
            <math xmlns="http://www.w3.org/1998/Math/MathML">
                <mrow>
                    <mi>&#931;</mi>
                    <mi>x</mi>
                    <mo>=</mo>
                    <mn id="xsum"></mn>
                </mrow>
                <br>
                <mrow>
            </math>
            <math xmlns="http://www.w3.org/1998/Math/MathML">
                <mrow>
                    <mi>&#931;</mi>
                    <msup>
                        <mi>x</mi>
                        <mrow>
                            <mn>2</mn>
                        </mrow>
                    </msup>
                    <mo>=</mo>
                    <mn id="x2sum"></mn>
                </mrow>
                <br>
                <mrow>
            </math>
            <math xmlns="http://www.w3.org/1998/Math/MathML">
                <msup>
                    <mi>s</mi>
                    <mrow>
                        <mn>2</mn>
                    </mrow>
                </msup>
                <mo>=</mo>
                <mn id="s2"></mn>
                <br>
            </math>
            <math xmlns="http://www.w3.org/1998/Math/MathML">
                <msup>
                    <mi>&sigma;</mi>
                    <mrow>
                        <mn>2</mn>
                    </mrow>
                </msup>
                <mo>=</mo>
                <mn id="sigma2"></mn>
                </mrow>
                <br>
            </math>
            <math xmlns="http://www.w3.org/1998/Math/MathML">
                <mrow>
                    <mi>s</mi>
                    <mo>=</mo>
                    <mn id="s"></mn>
                </mrow>
                <br>
            </math>
            <math xmlns="http://www.w3.org/1998/Math/MathML">
                <mrow>
                    <mi>&sigma;</mi>
                    <mo>=</mo>
                    <mn id="sigma"></mn>
                </mrow>
                <br>
            </math>
        </h4>
    </div>
    <!--Xarray-->
    <div class="col-sm-6 pull-left panel panel-default">
        <div class="panel-body">
            <h3>
                <u>X-Array</u>
            </h3>
            <h4 id="xarray"></h4>
        </div>
    </div>
    <br>
    <!--Q Values-->
    <div>
        <div class="col-sm-10 pull-left panel panel-default">
            <div class="col-sm-2">
                <h4>Min</h4>
            </div>
            <div class="col-sm-2">
                <h4>Q1</h4>
            </div>
            <div class="col-sm-2">
                <h4>Q2</h4>
            </div>
            <div class="col-sm-2">
                <h4>Q3</h4>
            </div>
            <div class="col-sm-2">
                <h4>Max</h4>
            </div>
        </div>
        <br>
        <div class="col-sm-10 pull-left panel panel-body">
            <div class="col-sm-2">
                <math xmlns="http://www.w3.org/1998/Math/MathML">
                    <mn id="minVal"></mn>
                </math>
            </div>
            <div class="col-sm-2">
                <math xmlns="http://www.w3.org/1998/Math/MathML">
                    <mi>Coming soon</mi>
                </math>
            </div>
            <div class="col-sm-2">
                <math xmlns="http://www.w3.org/1998/Math/MathML">
                    <mn id="q2"></mn>
                </math>
            </div>
            <div class="col-sm-2">
                <math xmlns="http://www.w3.org/1998/Math/MathML">
                    <mi>Coming soon</mi>
                </math>
            </div>
            <div class="col-sm-2">
                <math xmlns="http://www.w3.org/1998/Math/MathML">
                    <mn id="maxVal"></mn>
                </math>
            </div>
        </div>
    </div>
    <script>
        (function () {
            function abc() {
                //calling the id to pull the values
                var xvalue = document.getElementById('xvalues').value;
                //making the values an array
                var xarray = JSON.parse("[" + xvalue + "]");
                document.getElementById("xarray").innerHTML = xarray;

                //counting the characters in the array
                var n = xarray.length;
                n = parseFloat(n);
                document.getElementById("n").innerHTML = n;

                //Declaring the Q arrays
                var q1array = xarray;
                var q3array = xarray;
                var medianarray = xarray
                var median;

                //finding the sum of the array
                var xsum;
                var xsum = xarray.reduce(add, 0);

                function add(a, b) {
                    return a + b;
                }
                var xsum = parseFloat(xsum);
                var x2sum = 0;
                for (var i = 0; i < xarray.length; i++) {
                    x2sum += Math.pow(xarray[i], 2);
                }
                var x2sum = parseFloat(x2sum);

                //finding sigma
                var s2 = ((x2sum - (Math.pow(xsum, 2) / n))) / (n - 1);
                var sigma2 = ((x2sum - (Math.pow(xsum, 2) / n))) / n;
                var s = Math.sqrt(s2);
                var sigma = Math.sqrt(sigma2);

                //finding the range
                var maxVal = Math.max.apply(Math, xarray);
                var minVal = Math.min.apply(Math, xarray);

                //finding the mean
                var xbar = xsum / n;

                //finding the mode
                function mode(xarray) {
                    if (xarray.length <= 1)
                        return null;
                    var modeMap = {};
                    var maxEl = xarray[0],
                        maxCount = 1;
                    for (var i = 0; i < xarray.length; i++) {
                        var el = xarray[i];
                        if (modeMap[el] == null)
                            modeMap[el] = 2;
                        else
                            modeMap[el]++;
                        if (modeMap[el] > maxCount) {
                            maxEl = el;
                            maxCount = modeMap[el];
                            document.getElementById("maxCount").innerHTML = maxCount - 1;
                        }
                    }
                    return maxEl;
                }
                var mode = mode(xarray);

                //getting the Median Array
                if (n >= 3) {
                    medianarray.shift();
                    medianarray.pop();
                    getMedian(medianarray);
                } else if (n === 2) {
                    median = ((medianarray[0] + medianarray[1]) / n);
                } else {
                    median = medianarray[0];
                }

                //Getting the Median
                function getMedian(medianarray) {
                    if (medianarray.length >= 3) {
                        medianarray.shift();
                        medianarray.pop();
                        getMedian(medianarray);
                    } else if (medianarray.length == 2) {
                        median = ((medianarray[0] + medianarray[1]) / 2);
                    } else {
                        median = medianarray[0];
                    }
                }
                /*
                //Getting the Q1 Array
                function getQArray(value) {
                    return value > median;
                }
                var q1array = q1array.filter(getQArray);

                //Getting the Q1 Value
                if (q1array.value > median){
                    getQ(q1array);
                }
                function getQ(q1array) {
                    q1array = q1array.shift;
                    if (q1array.length >= 3) {
                        q1array.shift();
                        q1array.pop();
                        getQ(q1array);
                    } else if (q1array.length == 2) {
                        q1val = ((q1array[0] + q1array[1]) / 2);
                        console.log(q1val);
                    } else {
                        q1val = q1array[0];
                    }
                }

                console.log(q1array);
                */
                //rounding
                var xbar = Math.round(xbar * 100) / 100;
                var xsum = Math.round(xsum * 100) / 100;
                var x2sum = Math.round(x2sum * 100) / 100;
                var s2 = Math.round(s2 * 1000) / 1000;
                var sigma2 = Math.round(sigma2 * 1000) / 1000;
                var s = Math.round(s * 1000) / 1000;
                var sigma = Math.round(sigma * 1000) / 1000;

                //sending values to html
                //document.getElementById("q1").innerHTML = q1val;
                document.getElementById("q2").innerHTML = median;
                //document.getElementById("q3").innerHTML = Q3;
                document.getElementById("minVal").innerHTML = minVal;
                document.getElementById("maxVal").innerHTML = maxVal;
                document.getElementById("median").innerHTML = median;
                document.getElementById("s2").innerHTML = s2;
                document.getElementById("sigma2").innerHTML = sigma2;
                document.getElementById("s").innerHTML = s;
                document.getElementById("sigma").innerHTML = sigma;
                document.getElementById("mode").innerHTML = mode;
                document.getElementById("xsum").innerHTML = xsum;
                document.getElementById("x2sum").innerHTML = x2sum;
                document.getElementById("xbar").innerHTML = xbar;
            }
            document.getElementById("submitxy").addEventListener("click", function () {
                abc();
            });
        })();
    </script>

</html>